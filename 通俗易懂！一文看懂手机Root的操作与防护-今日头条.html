<!DOCTYPE html> <html lang=zh-cn><!--
 Page saved with SingleFile 
 url: https://m.toutiao.com/article/7160493540148134403/?traffic_source=CS1118&amp;in_ogs=2&amp;utm_source=VV&amp;source=search_tab&amp;utm_medium=wap_search&amp;prevent_activate=1&amp;original_source=2&amp;in_tfs=VV&amp;channel=&amp;enter_keyword=root%E6%A1%86+%E4%BF%9D%E6%B4%BB 
 saved date: Thu Sep 26 2024 16:26:38 GMT+0800 (中国标准时间)
--><meta charset=utf-8><title>通俗易懂！一文看懂手机Root的操作与防护-今日头条</title><meta name=keywords content="Android，Linux，2019科技之光，iOS，操作系统，UNIX，Darwin，软件，开源软件，BSD，蓝牙，Google，Windows，硬件，数据结构，技术，Windows Phone"><meta name=description content=从技术层次来讲，用户拥有了修改系统文件的权限，甚至可以控制账户、增加或删除硬件等，但对普通用户来说，最大的一个用处就是卸载“Root之前无法卸载的软件”，部分品牌商在手机出厂之前内置安装了一些无法卸载的软件，这些软件在手机Root之后，都可><meta property=og:title content=通俗易懂！一文看懂手机Root的操作与防护-今日头条><meta property=og:description content=从技术层次来讲，用户拥有了修改系统文件的权限，甚至可以控制账户、增加或删除硬件等，但对普通用户来说，最大的一个用处就是卸载“Root之前无法卸载的软件”，部分品牌商在手机出厂之前内置安装了一些无法卸载的软件，这些软件在手机Root之后，都可><meta property=og:type content=website><meta property=og:url content=https://www.toutiao.com/article/7160493540148134403/><meta property=og:image content="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/ece91c38c6ca4bf3847f0cb2354db425~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943984&amp;x-signature=A8LaQuQkg9%2B1MzGUa1Qoovt7%2FmE%3D"><link rel=canonical href=https://www.toutiao.com/article/7160493540148134403/><link rel=icon href=data:, type=image/png data-sf-original-href=https://lf3-static.bytednsdoc.com/obj/eden-cn/9slhojpteh7nupwnuhojnulw/mobile_share/logo.png><script type=application/ld+json>{"@context":"https://schema.org","@type":"NewsArticle","headline":"通俗易懂！一文看懂手机Root的操作与防护-今日头条","description":"从技术层次来讲，用户拥有了修改系统文件的权限，甚至可以控制账户、增加或删除硬件等，但对普通用户来说，最大的一个用处就是卸载“Root之前无法卸载的软件”，部分品牌商在手机出厂之前内置安装了一些无法卸载的软件，这些软件在手机Root之后，都可","image":["https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/a8ff6e8b17894b5f865dbc2d6b930bc1~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=QfpquM3Xxf7RfROnuXZySjdqeQY%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/d084ec79c2f64adebd4949f6b687bb35~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=zEylO1XCeJePSsVUTqo%2FsWFwBqI%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/249e6302f97742ac845a6fd32a7658a5~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=9rnWtFJI1gVqJM2tzuJoqqs63lg%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/a7988f092b854719894690350bc948a8~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=ZF3bK4TJ%2FRf%2BuyjvqlpQKEQLruk%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/a2dd0fe9f5004348835dab73963ccf75~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=lc9TvbVVtFjpPkDP5PK9VGBsh0w%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/d3c0ed3ae2dc474b92dd01e5ee459582~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=6SnInhKyfpOh%2BYf8ylhuen5mmmI%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/136f2e72bf9548c88883bef7484c7a25~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=DcviWuuVxuHgioAnIaZUwBVwe98%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/fdde37a9b40344fb936a55c8bd95c950~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=p8jiE5Yh3du2K3lGqQdjrc1syFg%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/1de906a6447349868d8c8704027519f1~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=O%2B9dS2rRXx5vUmRbcrPrZdpjLkM%3D","https://p26-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/89f2ed0864c44bd08ea1af53c775643f~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=YtL1myE7vgarfKo5ZgSOMQK6pSA%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/d882bd1442c14401bcfee503babca7c8~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=ceNhtQZR%2BLkQCn5FQjBlYDv6fYg%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/b04797afd8f248f2a92fe93f1489672b~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=m7CqJATwhyqbG4qEvO9uQb1qCd4%3D","https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/e33615b560e949a78018d284f96510ca~tplv-tt-large.image?_iz=30575&lk3s=06827d14&x-expires=1727943983&x-signature=wdyLEJk5%2BETNMrxDk377kVc726U%3D"],"datePublished":"2022-10-31T10:17:07+08:00","dateModified":"2024-07-27T09:37:52+08:00","author":{"@type":"Person","name":"业务安全专家","url":"https://profile.zjurl.cn/rogue/ugc/profile/?user_id=62409544759&request_source=1"},"publisher":{"@type":"Organization","name":"今日头条","url":"https://m.toutiao.com/","logo":{"@type":"ImageObject","url":"https://lf3-static.bytednsdoc.com/obj/eden-cn/9slhojpteh7nupwnuhojnulw/mobile_share/logo.png"}}}</script><meta name=applicable-device content=mobile><meta http-equiv=Cache-Control content=no-transform><meta http-equiv=Cache-Control content=no-siteapp><meta name=screen-orientation content=portrait><meta name=x5-orientation content=portrait><meta name=format-detection content="telephone=no"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1,minimal-ui,viewport-fit=cover"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=renderer content=webkit><meta name=apple-mobile-web-app-capable content=yes><meta name=layoutmode content=standard><meta name=imagemode content=force><meta name=wap-font-scale content=no><meta name=referrer content=no-referrer><link rel="shortcut icon" href=data:, type=image/x-icon data-sf-original-href=https://lf3-static.bytednsdoc.com/obj/eden-cn/9slhojpteh7nupwnuhojnulw/mobile_share/logo.png><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style><body><div id=root><div class=arco-show-monitor><div class=m-top-container><div class=m-top-container-left-part role=text aria-label=今日头条·看见更大的世界><img aria-hidden=true src=data:, class=logo alt=今日头条 data-sf-original-src=https://lf3-static.bytednsdoc.com/obj/eden-cn/9slhojpteh7nupwnuhojnulw/mobile_share/logo.png><i class=search-icon></i><input type=text class=search-input placeholder=搜索或输入网址 aria-label=搜索 readonly></div><div role=button aria-label=打开APP class=open>打开APP</div></div></div><div class=arco-show-monitor><div class=m-bottom-container><div class=m-bottom><img aria-hidden=true src=data:, class=logo alt=今日头条 data-sf-original-src=https://lf3-static.bytednsdoc.com/obj/eden-cn/9slhojpteh7nupwnuhojnulw/mobile_share/bottom_logo.png><span class=text>APP内打开</span></div></div></div><div class=m-top-padding></div><div class=arco-show-monitor><div class=m-index-tag><span class=m-index-text>去首页</span><img aria-hidden=true src=data:, class=logo alt=今日头条 data-sf-original-src=https://lf3-static.bytednsdoc.com/obj/eden-cn/9slhojpteh7nupwnuhojnulw/mobile_share/logo.png><div class=m-index-split></div><img aria-hidden=true src=data:, class=icon alt=今日头条></div></div><div class=article__title__container><h1 class=article__title>通俗易懂！一文看懂手机Root的操作与防护</h1></div><div class=article__author><div class=author><img class=avatar src=data:, data-sf-original-src=https://sf1-cdn-tos.toutiaostatic.com/img/user-avatar/0623c72cab0e7401ad0c257b8852ff82~300x300.image><span class=author-name>业务安全专家</span><div class=arco-show-monitor><div class=follow-button><span class=follow-text>关注</span></div></div></div><div class=author-info><span class=author-description></span><span class=publish-time>2022.10.31</span><span class=author-location></span></div></div><div class="bgwhite android"><div class=article-container><div class=fold-content><div class="content expanded"><article class="syl-article-base article syl-page-article syl-device-mobile"><p data-track=1><span>Root，对于任何手机发烧友、玩机客、从事移动设备研发的人员来说，并不陌生，它代表绝大部分移动设备的使用者能够掌握到的最高权限。</span><p data-track=2><span>从技术层次来讲，用户拥有了修改系统文件的权限，甚至可以控制账户、增加或删除硬件等，但对普通用户来说，最大的一个用处就是卸载“Root之前无法卸载的软件”，部分品牌商在手机出厂之前内置安装了一些无法卸载的软件，这些软件在手机Root之后，都可以被卸载掉，Root相当于让用户拥有了自由增减软件的权限。</span><h1 class=pgc-h-arrow-right data-track=3>Root的前世今生</h1><p data-track=4><span>Root一词起源于Linux/Unix系统，众所周知，Linux/Unix系统的文件系统以根“/”出发向下形成一个倒置的树型文件系统结构，Root即根的英文释义，那么Linux/Unix系统就以Root账号所拥有的权限作为系统管理员的权限，口口相传，Root就代表了Linux/Unix上最高的权限。</span><p data-track=5><span>在移动设备发展的初期，各种移动设备所使用的操作系统各不相同，比较出众的有塞班、Windows Phone、iOS、安卓。随着市场的选择，只有安卓与iOS留存下来，成为普及的手机操作系统。按照POSIX标准协议和开源协议的规定，安卓与iOS都应该保留了Linux/Uinx上的相应的功能。</span><p data-track=6><span>其中，安卓就是以Linux作为基础进行构建的系统，而iOS则是使用了以xnu为内核的Darwin（Darwin来自于BSD）。按照开源操作系统而言，安卓和iOS都理应保留所有用户使用Root账户去掌控自己设备的权限。</span><p data-track=7><span>但现实情况是，安卓与iOS不允许用户使用Root权限，尤其是iOS对于Root权限的监控与封锁达到了前所未有的地步，以至于对iOS的Root被称作“越狱”。iOS上的Root过程相对于安卓更为复杂与困难，所以本文主要以安卓系统的Root为主，详细介绍Root的前世今生。</span><h1 class=pgc-h-arrow-right>安卓系统的三大Root方式</h1><p data-track=9><span>相较于封闭生态的iOS系统，安卓的Root方式可谓是从百花齐放到万物归一。不同安卓系统版本，获取Root权限主流方式不同。</span><div class=pgc-img><img src=data:, img_width=640 img_height=54 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/a8ff6e8b17894b5f865dbc2d6b930bc1~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=QfpquM3Xxf7RfROnuXZySjdqeQY%3D"><p class=pgc-img-caption></p></div><p data-track=10><span>在安卓手机上，获取Root权限主要有三种方式：漏洞、OEM官方解锁、工厂方式。其中通过漏洞方式获取Root，是开发者最早的探索；工厂模式获取Root则是通过如骁龙9008模式通过底层串口将特殊的ROM刷写入手机进而获取Root；官方解锁的方式则是OEM产商提供给一些发烧友的“通道”，通过解锁Bootloader锁获取刷写ROM获取Root。</span><p data-track=11><span><strong><span>第一阶段：百家漏洞齐争鸣，先驱CVE-2009-2692漏洞</span></strong></span><p data-track=12><span>在安卓系统早期时忽略了安全性问题，许多在Linux中产生的安全问题，都能在安卓得以复现，其中最早有公开记录并可追溯的是Znix利用Linux漏洞CVE-2009-2692编写的安卓版本提权程序，代码如下：</span><div class=pgc-img><img src=data:, img_width=640 img_height=419 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/d084ec79c2f64adebd4949f6b687bb35~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=zEylO1XCeJePSsVUTqo%2FsWFwBqI%3D"><p class=pgc-img-caption></p></div><p data-track=13><span>利用蓝牙协议触发sendpage漏洞</span><div class=pgc-img><img src=data:, img_width=640 img_height=131 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/249e6302f97742ac845a6fd32a7658a5~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=9rnWtFJI1gVqJM2tzuJoqqs63lg%3D"><p class=pgc-img-caption></p></div><p data-track=14><span>权限提升攻击载荷</span><p data-track=15><span>该漏洞的产生主要是sock_sendpage没有对socket_file_ops数据结构的snedpage字段字段做指针检查，有些模块不具有sendpage功能，将指针初始化为NULL，此时直接调用sendpage会导致直接调用空指针导致报错并进而进行权限提升。Znix直接将现有有效用户id(euig)与有效用户组(egid)的指针赋值为0即Root用户与Root用户组，再将有效用户与有效用户组指针赋给真实的用户指针与真实的用户组指针，从而达到权限提升的目的。然后利用蓝牙协议与send_page的漏洞触发这一攻击载荷。</span><p data-track=16><span>Znix发布该exploit的时间点在安卓_ndk_r1版本发布后的两个月。在该exploit发布后，人们发现在安卓上通过漏洞的形式获取Root权限方式大为可行，随即越来越多的安全人员与发烧友开始在安卓上挖掘系统漏洞，导致安卓的安全问题呈现井喷式的爆发。不过这场闹剧随着Google不断的修复与SElinux的引入，闹剧在安卓4.4戛然而止，安卓系统进入了一个稳定的时期，安卓的Root也进入了一个新的探索时代。</span><div class=pgc-img><img src=data:, img_width=640 img_height=104 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/a7988f092b854719894690350bc948a8~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=ZF3bK4TJ%2FRf%2BuyjvqlpQKEQLruk%3D"><p class=pgc-img-caption></p></div><p data-track=17><span>使用Linux系统的人都知道，在Linux上有一个程序叫/usr/bin/su，用户可以通过su命令来切换身份，安卓的基础是Linux，在安卓版本1.0-4.4中，安卓默认安装了su程序，使用者可以通过使用su进行获取Root，只需要su程序的权限为Access: (4755/-rwsr-xr-x) Uid: ( 0/ Root) Gid: ( 0/ Root)。</span><p data-track=18><span><strong><span>第二阶段：混乱中的探索，supersu与superuser</span></strong></span><p data-track=19><span>Google在安卓4.4版本，基本上将Linux中可提权的漏洞修复并限制利用漏洞进行提权的方式。安卓4.4及以上，Anroid也不预装su程序，并且加入SElinux，就算拥有4755权限的su也无法达到完美Root。开发者们就尝试将改造后的su写入到安卓的/system下，让需要Root权限的程序通过/system下的su程序进行执行。</span><p data-track=20><span>而向/system下写入su需要提前解锁（unlock）安卓手机，该方式比利用漏洞提权稳定性更高。许多大神都开始编写不同的su程序，其中比较有名的就是chainsDD的su与chainfire的suspersu，而单有获取Root权限的方式仍然不够，还需要一个分发Root权限的管理工具，koush的superuser恰好补齐了这一缺点，让这一体系得以完善。</span><p data-track=21><span>不过好景不长，该方法引起了Google的关注，Google在后续发布的版本中对/system等分区进行完整性校验，使得修改system分区变得不可行，在2018年10月，chainfire宣布不再维护supersu。而另一位开发者则以巧妙的方式，让Root又变为可能。</span><p data-track=22><span><strong><span>第三阶段：从混乱中受到启发，走向归一的Magisk</span></strong></span><p data-track=23><span>一个名叫topjohnwu的开发者，从supersu中受到启发，他仍然使用supersu的原理获得Root权限，但是他并不对/system等分区做额外的修改，他通过尝试发现，虽然/system等分区无法修改，但是可以在/system分区下进行添加挂载点，于是他用了一种overlay的方法，让用户刷写特殊的boot.img，修改启动时的挂载操作，做出了一个overlay版本的system，所有的操作都在这个system上进行，这样就避开了对原有system的修改，完成原有supersu的功能，而这款软件就是现在大部分人熟知的Magisk。Magisk不仅完成了获取Root，并且集成了Root权限的管理器。</span><p data-track=24><span>随着topjohnwu加入谷歌，magisk的代码需要google安全团队进行审计，magisk某种程度上拥有了官方背书，是目前最稳定的Root方式。</span><h1 class=pgc-h-arrow-right>小白该如何Root安卓的手机</h1><p data-track=27><span>本文将使用TWRP方式教大家如何使用Magisk获得Root权限。在获取Root前，需要解除BootLoader锁，请读者自行联系OEM厂商解除Bootloader锁。</span><p data-track=28><span>顶象特别提醒：Root有一定的风险，或造成手机无法使用，请谨慎操作，本文不对任何后果承担相应责任。</span><p data-track=29><span>1、准备adb fastboot命令工具、magisk以及对应的twrp.img（不同厂商需要的twrp镜像不同，请读者自行查询所需的twrp镜像）</span><div class=pgc-img><img src=data:, img_width=640 img_height=319 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/a2dd0fe9f5004348835dab73963ccf75~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=lc9TvbVVtFjpPkDP5PK9VGBsh0w%3D"><p class=pgc-img-caption></p></div><p data-track=30><span>2、使用adb命令将Magisk放入到sdcard中，命令如下：</span><div class=pgc-img><img src=data:, img_width=635 img_height=47 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/d3c0ed3ae2dc474b92dd01e5ee459582~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=6SnInhKyfpOh%2BYf8ylhuen5mmmI%3D"><p class=pgc-img-caption></p></div><p data-track=31><span>3、进入bootloader界面，输入对应的fastboot命令，进入twrp界面。</span><div class=pgc-img><img src=data:, img_width=598 img_height=39 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/136f2e72bf9548c88883bef7484c7a25~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=DcviWuuVxuHgioAnIaZUwBVwe98%3D"><p class=pgc-img-caption></p></div><p data-track=32><span>4、选择Install,然后选择Magisk.zip。</span><div class=pgc-img><img src=data:, img_width=640 img_height=588 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/fdde37a9b40344fb936a55c8bd95c950~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=p8jiE5Yh3du2K3lGqQdjrc1syFg%3D"><p class=pgc-img-caption></p></div><p data-track=33><span>5、进入安装Magisk的界面，将滑动条从左滑到顶端。如果出现如下界面，则证明安装Magisk成功。</span><div class=pgc-img><img src=data:, img_width=640 img_height=649 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/1de906a6447349868d8c8704027519f1~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=O%2B9dS2rRXx5vUmRbcrPrZdpjLkM%3D"><p class=pgc-img-caption></p></div><p data-track=34><span>6、重启手机后，使用将maigsk.zip改回magisk.apk，使用如下命令安装Magisk管理器。</span><div class=pgc-img><img src=data:, img_width=407 img_height=37 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p26-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/89f2ed0864c44bd08ea1af53c775643f~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=YtL1myE7vgarfKo5ZgSOMQK6pSA%3D"><p class=pgc-img-caption></p></div><p data-track=35><span>随后可以在手机中打开Magisk，发现Magisk已经正常工作。</span><div class=pgc-img><img src=data:, img_width=600 img_height=1318 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/d882bd1442c14401bcfee503babca7c8~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=ceNhtQZR%2BLkQCn5FQjBlYDv6fYg%3D"><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>如何检测设备的Root操作</h1><p data-track=38><span>对于安全从业者与一些需要风控的企业，需要得知用户的手机是否处于风险状态，是否被Root。</span><p data-track=39><span><strong><span>1、包名检测。</span></strong></span><p data-track=40><span>由于Magisk是通过Maigsk.apk进行管理它的su权限分发的，所以可以使用获取包名的方式检查用户手机是否存在Magisk App来得知用户是否使用了Magisk Root,具体代码如下：</span><div class=pgc-img><img src=data:, img_width=640 img_height=490 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/b04797afd8f248f2a92fe93f1489672b~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=m7CqJATwhyqbG4qEvO9uQb1qCd4%3D"><p class=pgc-img-caption></p></div><p data-track=41><span>尝试运行程序，得到如下结果。</span><div class=pgc-img><img src=data:, img_width=640 img_height=682 inline=0 alt=通俗易懂！一文看懂手机Root的操作与防护 data-sf-original-src="https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/e33615b560e949a78018d284f96510ca~tplv-tt-large.image?_iz=30575&amp;lk3s=06827d14&amp;x-expires=1727943983&amp;x-signature=wdyLEJk5%2BETNMrxDk377kVc726U%3D"><p class=pgc-img-caption></p></div><p data-track=42><span>在上述方法中，虽然能检测到用户安装了Magisk，但是由于法律对用户隐私的保护，获取包名的方式会触及隐私合规红线，所以这种方法需要一定的权限，在使用该方法时要慎之又慎。</span><p data-track=43><span><strong><span>2、专业安全产品。</span></strong></span><p data-track=44><span>顶象设备指纹、顶象业务感知防御平台能够实时有效识别Root风险。</span><p data-track=45><span><strong>顶象设备指纹：</strong>能精准识别模拟器、root、越狱、调试、代码注入、多开、VPN代理等风险。包含，iOS平台hook、越狱行为，安卓root、debug、内存dump、注入、多开、模拟器、漏洞攻击等风险行为，WEB平台下浏览器颜色深度、分辨率，浏览器与系统、UA的匹配性和一致性、cookie是否禁用等行为。</span><p data-track=47><span><strong>顶象业务安全感知防御平台：<a class=pgc-link data-content=mp data-source=innerLink href=https://www.toutiao.com/article/7146405253355782696/ rel="noopener noreferrer noopener noreferrer" target=_blank>基于威胁探针、流计算、机器学习等先进技术</a></strong>，集设备风险分析、运行攻击识别、异常行为检测、预警、防护处置为一体的主动安全防御平台，能够实时发现摄像头遭劫持、设备伪造、设备Root等恶意行为，有效防控各类人脸识别系统风险。它具有威胁可视化、威胁可追溯、设备关联分析、多账户管理、跨平台支持、主动防御、开放数据接入、防御自定义和全流程防控等特点。</span><h1 class=pgc-h-arrow-right>写在最后</h1><p data-track=50><span>本文从Root的历史出发，讲述了获取Root的发展历史以及轶事，教大家从0到1完成对自己安卓手机的Root，提出了一些有效的检测Root的方式。Root与HOOK一样，是一把双刃剑，在普通人手里，它可以让系统不再受到约束，可以带来更好的手机使用体验，但在黑灰产手里，会变成非法牟利的工具，作为安全从业者，我们要辩证地看待每项技术，对非法行为我们要重拳出击，为安全事业添砖加瓦。</span><p data-track=52><span>在上一篇文章<a class=pgc-link data-content=mp data-source=innerLink href=https://www.toutiao.com/article/7145659468854854155/ rel="noopener noreferrer noopener noreferrer" target=_blank>《欲知己之所防，先知彼之所攻——论Hook 技术的攻防对抗》</a>我们提到Hook的攻击，Hook一定需要Root吗？答案是否定的。如果开发者有能力修改art源码、劫持Zygote，是可以完成Rootless HOOK操作的，Root是为了让HOOK及HOOK模块管理工具的使用降低成本，让HOOK操作者的重心不再放在HOOK的前置条件，而是更专注于HOOK模块的开发。</span></p></article></div></div></div></div></div><script data-template-shadow-root>(()=>{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll("template[shadowrootmode]").forEach(element=>{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute("shadowrootmode"),delegatesFocus:element.getAttribute("shadowrootdelegatesfocus")!=null,clonable:element.getAttribute("shadowrootclonable")!=null,serializable:element.getAttribute("shadowrootserializable")!=null});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()</script>